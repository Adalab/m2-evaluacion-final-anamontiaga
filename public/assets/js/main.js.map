{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\n// console.log('>> Ready :)');\n\nconst btn = document.querySelector(\".page__search--button\");\nconst listFilms = document.querySelector(\".page__results\");\n\n// array para guardar los favoritos\nconst favFilms = [];\nlet searchedFilms = [];\n\n// función que hace todas las cosas que quiero al hacer click en favoritos\nfunction handleFav(event) {\n  const currentFilm = event.currentTarget;\n  const clickedIndex = parseInt(currentFilm.dataset.index);\n  favFilms.push(searchedFilms[clickedIndex]);\n\n  //   // cojo los datos que quiero guardar en favoritos con un atributo\n  const favFilmContainer = document.querySelector(\".page__favorites__films\");\n  // le añado una clase para que se convierta en favoritos al hacer click\n  currentFilm.classList.toggle(\"film--is--favorite\");\n\n  //   if (currentFilm.classList.contains(\"film--is--favorite\") === true) {\n  //     // añademela al array si se queda con la clase\n  //     // pero añademela sólo si el array aún no lo tiene (===false), para que no se añada cada vez que hago click\n  //     if (favFilms.includes(searchedFilms[clickedIndex]) === false) {\n  //       favFilms.push(searchedFilms[clickedIndex]);\n  //     }\n  //   } else {\n  //     // quítamela del array si no se queda con la clase\n  //     const index = favFilms.indexOf(searchedFilms[clickedIndex]);\n  //     // si el índice existe (es mayor que -1)\n  //     if (index > -1) {\n  //       favFilms.splice(index, 1); // situate en el elemento y recortame ese mismo\n  //     }\n  //   }\n  // bucle para que me pinte favoritos en su contenedor\n  let htmlFavCode = \"\";\n\n  for (const favFilm of favFilms) {\n    htmlFavCode += `<li class\"page__favorites__films--item\"><img src=\"${favFilm.show.image}\" alt=\"${favFilm.show.name}\" class=\"page__favorites__films--image\"><h3 class=\"page__favorites__films--name\">${favFilm.show.name}</h3></li>`;\n  }\n\n  favFilmContainer.innerHTML = htmlFavCode;\n\n  console.log(favFilms);\n}\n\nfunction activateFavs() {\n  const films = document.querySelectorAll(\".page__results--list\");\n  const filmsTitles = document.querySelectorAll(\".page__results--name\");\n  // para aplicarle las propiedades cuando clicko, primero las busco\n  for (const film of films) {\n    film.addEventListener(\"click\", handleFav);\n  }\n  for (const title of filmsTitles) {\n    title.parentElement.addEventListener(\"click\", handleFav);\n  }\n}\n\n// buscamos la película llamando a la API\nconst getFilm = function() {\n  let inputFilm = document.querySelector(\".page__search--film\");\n  inputFilm = inputFilm.value;\n  return `http://api.tvmaze.com/search/shows?q=${inputFilm}`;\n};\n\n// buscamos la información que queremos de la película llamando a la API y diciéndole la info que queremos. El fetch es el return de la función getFilm\nconst getFilmInfo = function(ev) {\n  ev.preventDefault();\n  fetch(getFilm())\n    .then(response => response.json())\n    .then(data => {\n      listFilms.innerHTML = \"\"; // te lo pinta en blanco y no me repite las búsquedas y refresca\n\n      for (let i = 0; i < data.length; i++) {\n        //let imgSrc;\n        // // declaramos variable vacía con el src\n        // // condicional para definir qué src tendrá la imagen en función de si hay imagen en el servidor o no -en ese caso la colocaremos por defecto-\n        if (data[i].show.image === null) {\n          data[i].show.image = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n        } else {\n          data[i].show.image = data[i].show.image.medium;\n        }\n\n        listFilms.innerHTML += `<li class=\"page__results--list\" data-index=\"${i}\"><img src=\"${data[i].show.image}\" alt=\"${data[i].show.name}\" class=\"page__results--image\"><h3 class=\"page__results--name\">${data[i].show.name}</h3></li>`;\n      }\n      searchedFilms = data;\n      activateFavs();\n    });\n};\n\nbtn.addEventListener(\"click\", getFilmInfo);\n"]}