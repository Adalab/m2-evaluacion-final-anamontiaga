<<<<<<< HEAD
{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\nconst btn = document.querySelector(\".page__search--button\");\nconst listFilms = document.querySelector(\".page__results\");\nconst favFilmContainer = document.querySelector(\".page__favorites__films\");\n\nlet favFilms = [];\nlet searchedFilms = [];\n\n// LOCAL STORAGE\n\nfunction saveData() {\n  localStorage.setItem(\"favfilms\", JSON.stringify(favFilms));\n}\n\nfunction catchData() {\n  const catchInfo = JSON.parse(localStorage.getItem(\"favfilms\"));\n  if (catchInfo !== null) {\n    favFilms = catchInfo;\n    paintFavs();\n  }\n}\n\nfunction handleFav(event) {\n  const currentFilm = event.currentTarget;\n  const clickedIndex = parseInt(currentFilm.dataset.index);\n  favFilms.push(searchedFilms[clickedIndex]);\n\n  currentFilm.classList.toggle(\"film--is--favorite\");\n\n  paintFavs();\n\n  const currentFavFilm = document.querySelector(\".page__favorites__films--item\");\n\n  if (currentFilm.classList.contains(\"film--is--favorite\") === false) {\n    currentFavFilm.style = \"display: none;\";\n  }\n\n  saveData(favFilms);\n}\n\nfunction paintFavs() {\n  let htmlFavCode = \"\";\n\n  for (const favFilm of favFilms) {\n    htmlFavCode += `<li class=\"page__favorites__films--item\"><img src=\"${favFilm.show.image}\" alt=\"${favFilm.show.name}\" class=\"page__favorites__films--image\"><h3 class=\"page__favorites__films--name\">${favFilm.show.name}</h3></li>`;\n  }\n\n  favFilmContainer.innerHTML = htmlFavCode;\n}\n\nfunction activateFavs() {\n  const films = document.querySelectorAll(\".page__results--list\");\n  const filmsTitles = document.querySelectorAll(\".page__results--name\");\n\n  for (const film of films) {\n    film.addEventListener(\"click\", handleFav);\n  }\n  for (const title of filmsTitles) {\n    title.parentElement.addEventListener(\"click\", handleFav);\n  }\n}\n\nconst getFilm = function() {\n  let inputFilm = document.querySelector(\".page__search--film\");\n  inputFilm = inputFilm.value;\n  return `http://api.tvmaze.com/search/shows?q=${inputFilm}`;\n};\n\nconst getFilmInfo = function(ev) {\n  ev.preventDefault();\n  fetch(getFilm())\n    .then(response => response.json())\n    .then(data => {\n      listFilms.innerHTML = \"\";\n\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].show.image === null) {\n          data[i].show.image = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n        } else {\n          data[i].show.image = data[i].show.image.medium;\n        }\n\n        let recomendedText = \"Recomendado\";\n        if (data[i].show.language === \"English\") {\n          recomendedText = \"Recomendado\";\n        } else {\n          recomendedText = \"\";\n        }\n        listFilms.innerHTML += `<li class=\"page__results--list\" data-index=\"${i}\"><img src=\"${data[i].show.image}\" alt=\"${data[i].show.name}\" class=\"page__results--image\"><h3 class=\"page__results--name\">${data[i].show.name}</h3><p class=\"page__results--language\">${data[i].show.language}</p><p>${recomendedText}</p></li>`;\n      }\n\n      searchedFilms = data;\n      activateFavs();\n    });\n};\n\ncatchData();\n\nbtn.addEventListener(\"click\", getFilmInfo);\n\n///....\n\nconst logBtn = document.querySelector(\".page--log--button\");\n\nfunction logFavs(ev) {\n  ev.preventDefault();\n\n  console.log(`Tienes ${favFilms.length} favorito`);\n}\n\nlogBtn.addEventListener(\"click\", logFavs);\n"]}
=======
{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\n// 1º Declaración de variables con elementos del DOM\nconst btn = document.querySelector(\".page__search--button\");\nconst listFilms = document.querySelector(\".page__results\");\nconst favFilmContainer = document.querySelector(\".page__favorites__films\");\n\n// Declaro dos arrays, una para los films que busco en el input y otra para los que seleciono y meto en favoritos\nlet favFilms = [];\nlet searchedFilms = [];\n\n// LOCAL STORAGE. Cojo todo lo que haya en el array de favoritos, lo paso a cadena y lo guardo en LS con el nombre de favfilms.\n// Esta función se ejecuta cuando clickamos en los favoritos (saveData(favfilms) en handleFav(event))\n\nfunction saveData() {\n  localStorage.setItem(\"favfilms\", JSON.stringify(favFilms));\n}\n\n// Si en el LS hay algo, me lo metes en el array de favoritos, osea, me los dejas ahí\nfunction catchData() {\n  const catchInfo = JSON.parse(localStorage.getItem(\"favfilms\"));\n  if (catchInfo !== null) {\n    favFilms = catchInfo;\n    paintFavs(); // y me los vuelves a pintar\n  }\n}\n\n// 5º Añadimos clase en el filme que pinchamos para cambiar color y generamos un índice para meter los filmes en el array de favFilms.\n// Además los pintamos e la lista de favoritos (paintFavs()).\n// Además salvamos los datos.\nfunction handleFav(event) {\n  const currentFilm = event.currentTarget;\n  const clickedIndex = parseInt(currentFilm.dataset.index);\n  // si el favorito ya esta en favFilms, no lo pushea.\n  if (favFilms.includes(searchedFilms[clickedIndex]) === false) {\n    favFilms.push(searchedFilms[clickedIndex]);\n  }\n\n  // Te animo a que en esta función compruebes si el favorito ya está entre los favoritos para que no sea añadido más de una vez. Esta es una de las cosas chungas del ejercicio por eso te lo digo.\n\n  currentFilm.classList.toggle(\"film--is--favorite\");\n\n  paintFavs();\n\n  saveData();\n}\n\n// 6º Pintamos los favoritos, leyendo el array de favoritos\nfunction paintFavs() {\n  let htmlFavCode = \"\";\n\n  for (let index = 0; index < favFilms.length; index++) {\n    htmlFavCode += `<li class=\"page__favorites__films--item\" data-index=\"${index}\"><button class=\"page__favorites__films--btn\" data-index=\"${index}\">x</button><img src=\"${favFilms[index].show.image}\" alt=\"${favFilms[index].show.name}\" class=\"page__favorites__films--image\"><h3 class=\"page__favorites__films--name\">${favFilms[index].show.name}</h3></li>`;\n  }\n\n  favFilmContainer.innerHTML = htmlFavCode;\n  activeRemoveFav();\n}\n\n// intento de borrar favoritos\nfunction removeFav(ev) {\n  let currentFavFilm = parseInt(ev.currentTarget.dataset.index);\n  favFilms.splice(currentFavFilm, 1);\n  paintFavs();\n  saveData();\n}\n\n// 4ª cambiamos el color a los filmes clickados( al <li> y al <h3>)\nfunction activateFavs() {\n  const films = document.querySelectorAll(\".page__results--list\");\n  const filmsTitles = document.querySelectorAll(\".page__results--name\");\n\n  for (const film of films) {\n    film.addEventListener(\"click\", handleFav);\n  }\n  for (const title of filmsTitles) {\n    title.parentElement.addEventListener(\"click\", handleFav);\n  }\n}\n// 2º Para realizar la petición de búsqueda de datos, obtenemos la URL, personalizada con el valor del input\nconst getFilm = function() {\n  let inputFilm = document.querySelector(\".page__search--film\");\n  inputFilm = inputFilm.value;\n  return `http://api.tvmaze.com/search/shows?q=${inputFilm}`;\n};\n\n// 3º Hacemos la petición de datos, ejecutando la función anterior, con el método .then\n// Definimos un elemento vacío en el DOM.\n// Si la imagen está vacía, muéstranos la imagen por defecto, si no, muéstranos la medium.\n// Y además píntame esos datos en el elemento del DOM.\n// Los datos que me devuelve la Promesa los guardamos en un array, searchedFilms\n// Y además, activamos la función activeFavs, para que nos los cambie de color al clickarlos (definida más arriba)\n\nconst getFilmInfo = function(ev) {\n  ev.preventDefault();\n  fetch(getFilm())\n    .then(response => response.json())\n    .then(data => {\n      listFilms.innerHTML = \"\";\n\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].show.image === null) {\n          data[i].show.image = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n        } else {\n          data[i].show.image = data[i].show.image.medium;\n        }\n\n        listFilms.innerHTML += `<li class=\"page__results--list\" data-index=\"${i}\"><img src=\"${data[i].show.image}\" alt=\"${data[i].show.name}\" class=\"page__results--image\"><h3 class=\"page__results--name\">${data[i].show.name}</h3></li>`;\n      }\n      searchedFilms = data;\n      activateFavs();\n    });\n};\n\ncatchData();\n\nbtn.addEventListener(\"click\", getFilmInfo);\n\nfunction activeRemoveFav() {\n  const removeBtns = document.querySelectorAll(\".page__favorites__films--btn\");\n  for (const removeBtn of removeBtns) {\n    removeBtn.addEventListener(\"click\", removeFav);\n  }\n}\n"]}
>>>>>>> d13ac0e87980733fe806454d6bf434db6d224dde
