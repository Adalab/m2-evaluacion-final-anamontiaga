"use strict";const btn=document.querySelector(".page__search--button"),listFilms=document.querySelector(".page__results"),favFilmContainer=document.querySelector(".page__favorites__films");let favFilms=[],searchedFilms=[];function saveData(){localStorage.setItem("favfilms",JSON.stringify(favFilms))}function catchData(){const e=JSON.parse(localStorage.getItem("favfilms"));null!==e&&(favFilms=e,paintFavs())}function handleFav(e){const t=e.currentTarget,a=parseInt(t.dataset.index);favFilms.push(searchedFilms[a]),t.classList.toggle("film--is--favorite"),paintFavs();const s=document.querySelector(".page__favorites__films--item");!1===t.classList.contains("film--is--favorite")&&(s.style="display: none;"),saveData(favFilms)}function paintFavs(){let e="";for(const t of favFilms)e+=`<li class="page__favorites__films--item"><img src="${t.show.image}" alt="${t.show.name}" class="page__favorites__films--image"><h3 class="page__favorites__films--name">${t.show.name}</h3></li>`;favFilmContainer.innerHTML=e}function activateFavs(){const e=document.querySelectorAll(".page__results--list"),t=document.querySelectorAll(".page__results--name");for(const t of e)t.addEventListener("click",handleFav);for(const e of t)e.parentElement.addEventListener("click",handleFav)}const getFilm=function(){let e=document.querySelector(".page__search--film");return`http://api.tvmaze.com/search/shows?q=${e=e.value}`},getFilmInfo=function(e){e.preventDefault(),fetch(getFilm()).then(e=>e.json()).then(e=>{listFilms.innerHTML="";for(let t=0;t<e.length;t++)null===e[t].show.image?e[t].show.image="https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e[t].show.image=e[t].show.image.medium,listFilms.innerHTML+=`<li class="page__results--list" data-index="${t}"><img src="${e[t].show.image}" alt="${e[t].show.name}" class="page__results--image"><h3 class="page__results--name">${e[t].show.name}</h3></li>`;searchedFilms=e,activateFavs()})};catchData(),btn.addEventListener("click",getFilmInfo);